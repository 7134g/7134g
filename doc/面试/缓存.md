### 缓存穿透

*   定义：获取不存在的数据
*   解决：
    *   即使查不到，也自动缓存该键，并设置短过期时间1分钟

### 缓存击穿

*   定义：某个热点数据突然过期，大量请求全部走到db
*   解决：
    *   确保一个进程同时只拿一次数据并共享结果，其他后续请求都将等待第一个去查询的请求返回，所以只会发生一次db查询

### 缓存雪崩

*   定义：大量缓存同时过期
*   解决：
    *   固定时间+随机过期时间（设置标准偏差时间）
    *   备用缓存（多级缓存）

### 缓存非主键查询

*   定义：基于查询条件查询时候，需要经历通过索引查主键，再通过主键取数据导致查询降低
*   解决：
    *   将条件查询得到的主键都缓存，那么之后每一次相同查询都可以直接通过主键直接去数据库查，从而提升效率。
*   风险：
    *   当原有主键被删除，重新写入一条时，会发生脏数据（使用假删除可以避免）

### 分布式缓存

*   定义：增加可利用的内存，平摊压力
*   解决：多虚拟节点一致性hash，避免降级后过多的缓存丢失

